$(document).ready(function(){if(!document.querySelector(".GPC0022"))return!1;var n={$el:$(".GPC0022"),alert:document.getElementById("compare_alert"),cookieArray:null,maximum:null,url:null,compareLink:{productCompareURL:null,bundleCompareURL:null},compareBtn:null,markup:{blank:null,item:null},init:function(){this.markup.blank=n.$el.find("template.empty-item").clone().html(),this.markup.item=n.$el.find("template.product-item").clone().html(),this.markup.membership=n.$el.find("template.product-member-price").clone().html(),n.$el.find("template.empty-item").remove(),n.$el.find("template.product-item").remove(),this.url=n.$el.attr("data-compare-url"),this.maximum="Y"==n.$el.attr("data-type-plp").toUpperCase()?6:3,this.compareLink.productCompareURL=n.$el.find(".compare-control .button").data("product-compare"),this.compareLink.bundleCompareURL=n.$el.find(".compare-control .button").data("bundle-compare"),this.compareBtn=this.$el.find(".compare-control .btn-compare a.btn"),this.slick.init(),n.trigger.init(),$("body").on({"initialized-plp":function(){document.querySelector(".js-compare")&&n.trigger.init()}}),$("body").on("click",".go-compare-sticky",function(e){e.preventDefault(),n.$el.find(".compare-sticky-collspace button:visible").focus()}),"component-compareSticky"==n.$el.attr("aria-labelldby")&&n.$el.removeAttr("aria-labelldby")},getBizType:function(e){var a=$(".navigation")&&$(".navigation").hasClass("b2b")?"B2B":"B2C";return 0<$(".search-contents-area").length&&e&&(a=0<e.closest(".business-product-list").length||e.closest(".products-box").hasClass("b2b")?"B2B":"B2C"),a},switcher:function(e){var a,r,t,o,i,l,c,s;e.preventDefault(),"cn"==COUNTRY_CODE.toLowerCase()&&($(this).closest(".GPC0009").length?baiduTrackEvent("add_to_compare_click",$(this).closest(".GPC0009"),"PDP"):$(this).closest(".GPC0007").length&&baiduTrackEvent("add_to_compare_click",$(this).closest("li"),"PLP")),"undefined"==typeof ePrivacyCookies||ePrivacyCookies.get("LGCOM_IMPROVEMENTS")||"de"==COUNTRY_CODE.toLowerCase()||"it"==COUNTRY_CODE.toLowerCase()?(a=e.currentTarget,c=$(a).hasClass("added"),r=a.getAttribute("data-model-id"),t=n.url,$(a).data("modelId",r),o=encodeURI(xssfilter(jQuery.param($(a).data()))),e=$(a).find(".add.sr-only").text(),i=$(a).find(".remove.sr-only").text(),c?(n.remove(r),$(a).removeClass("added").attr("aria-label",e)):(adobeTrackEvent("add-to-compare",{products:[{sales_model_code:findSalesModel($(this)),model_name:findModelName($(this))}],page_event:{add_to_compare:!0}}),c=n.maximum,e=getCookie(compareCookie.name),s=e?(e=0<=e.indexOf("|")?e.split("|"):[e]).length+1:1,e&&c<s?($(n.alert).find(".number").text(c),$(n.alert).find(".maximum").show().siblings().hide(),$(n.alert).modal("show")):(c=n.$el.attr("data-current-category"),l=n.getBizType($(a)),c&&""!=c&&(o=o+"&currentCategory="+n.$el.attr("data-current-category")),o=o+"&bizType="+l,!e||"LG5_CompareCart"==compareCookie.name&&"B2C"==l||"LG5_B2B_CompareCart"==compareCookie.name&&"B2B"==l?(c=!1,!e&&("LG5_CompareCart"==compareCookie.name&&"B2B"==l||"LG5_B2B_CompareCart"==compareCookie.name&&"B2C"==l)&&(c=!0),compareCookie.name="B2C"==l?"LG5_CompareCart":"LG5_B2B_CompareCart",c&&removeCookie(compareCookie.name),ajax.noCacheCall(t,o,"json",function(e){var a,t;1==e.result||"success"==e.status?(a=e.data[0].productList[0],t=n.$el.attr("data-type-plp"),("A"==a.modelType.toUpperCase()||"G"==a.modelType.toUpperCase()||"O"==a.modelType.toUpperCase()||"B"==a.modelType.toUpperCase()&&"Y"==a.bundlePlpDisplayFlag.toUpperCase()?"Y":"N")==t?(n.slick.addItem(r,a,e.data[0].productMessages),n.slick.switchLayer(!0,s),compareCookie.add(r),$("a.js-compare[data-model-id="+r+"]").addClass("added").attr("aria-label",i),(e=n.$el.attr("data-current-category"))&&""!=e||n.$el.attr("data-current-category",a.categoryId),n.compareBtn.attr("href",n.compareLink.productCompareURL+"?bizType="+l)):($(n.alert).find(".clear-category").show().siblings().hide(),$(n.alert).modal("show"))):($(n.alert).find(".clear-category").show().siblings().hide(),$(n.alert).modal("show"))},null,"body")):($(n.alert).find(".clear-category").show().siblings().hide(),$(n.alert).modal("show"))))):ePrivacyCookies.view("click")},remove:function(e){var a=getCookie(compareCookie.name),a=a?(a=0<=a.indexOf("|")?a.split("|"):[a]).length-1:0;n.slick.removeItem(e),compareCookie.remove(e),n.$el.find(".count").text(a),0==a&&n.$el.removeAttr("data-current-category")},slick:{$slideTarget:null,opt:{infinite:!1,slidesToShow:3,slidesToScroll:1,arrows:!0,dots:!1,responsive:[{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1,arrows:!1}}]},init:function(){var r=n.slick,e=n.$el;r.$slideTarget=e.find(".compare-product");var a=getCookie(compareCookie.name);a&&r.getCookieProducts(a),r.$slideTarget.slick(r.opt),mql.maxMd.addListener(r.branch),r.setMobileDisabled(),r.$slideTarget.on({click:function(e){e=$(e.currentTarget).closest(".item").attr("data-model-id");n.remove(e)}},".close"),e.on({click:function(e){r.$slideTarget.slick("unslick"),r.$slideTarget.html("");for(var a=[],t=0;t<3;t++)a+=n.markup.blank;r.$slideTarget.html(a),r.$slideTarget.slick(r.opt),compareCookie.remove(),$(".js-compare").removeClass("added"),$(".js-compare").each(function(){var e=$(this).find(".add.sr-only").text();$(this).attr("aria-label",e)}),n.$el.removeAttr("data-current-category"),r.switchLayer(!1,0)}},".clear"),$(window).on("load resize",function(){setTimeout(function(){r.fixBtn(),r.ommiShadowUi()},3e3)})},getCookieProducts:function(e){var a=n.$el.attr("data-compare-list"),o=n.getBizType(),e=n.$el.attr("data-name")+"="+encodeURI(e)+"&bizType="+o;ajax.noCacheCall(a,e,"json",function(e){if(e&&null!=e.data){for(var a,t=e.data[0].productList.length-1;0<=t;t--){var r=e.data[0].productList[t];n.slick.addItem(r.modelId,r,e.data[0].productMessages)}e.data[0].productList[0]&&(a=e.data[0].productList[0].categoryId,n.$el.attr("data-current-category",a),n.slick.switchLayer(!0,e.data[0].productList.length),a=(a="A"==(a=e.data[0].productList[0]).modelType.toUpperCase()||"G"==a.modelType.toUpperCase()||"O"==a.modelType.toUpperCase()||"B"==a.modelType.toUpperCase()&&"Y"==a.bundlePlpDisplayFlag.toUpperCase())?"Y":"N",n.$el.attr("data-type-plp",a),n.compareBtn.attr("href",n.compareLink.productCompareURL+"?bizType="+o))}})},setMobileDisabled:function(){var e=n.slick,a=e.$slideTarget.find(".item:eq(2)");a.is(".no-item")&&a.addClass("mobile-disable"),e.branch(mql.maxMd)},branch:function(e){var a=n.slick;e.matches?a.$slideTarget.slick("slickFilter",":not(.mobile-disable)"):a.$slideTarget.slick("slickUnfilter")},setBlank:function(){var e,a=n.slick,t=a.$slideTarget.find(".product").length,r=a.$slideTarget.find(".no-item");if(r[0])for(var o=0;o<r.length;o++){var i=a.$slideTarget.slick("getSlick").slideCount-1;a.$slideTarget.slick("slickRemove",i)}if(t<3){e=3-t;for(var l=0;l<e;l++)a.$slideTarget.slick("slickAdd",n.markup.blank)}a.setMobileDisabled()},addItem:function(e,a,t){var r=n.slick,o=(o=n.markup.item).replace(/\*modelId\*/g,e).replace(/\*userFriendlyName\*/g,null==a.userFriendlyName?"":a.userFriendlyName.replace(/\"/g,"''")).replace(/\*mediumImageAddr\*/g,a.mediumImageAddr).replace(/\*imageAltText\*/g,null!=a.imageAltText?a.imageAltText:"").replace(/\*modelUrlPath\*/g,a.modelUrlPath).replace(/\*discountedRate\*/g,a.discountedRate).replace(/\*rPrice\*\.\*rPriceCent\*/g,a.rPrice?changeFormatFullPrice(a.rPrice,a.rPriceCent):"null").replace(/\*rPromoPrice\*\.\*rPromoPriceCent\*/g,a.rPromoPrice?changeFormatFullPrice(a.rPromoPrice,a.rPromoPriceCent):"null").replace(/\*rPrice\*/g,a.rPrice?changeFormatPrice(a.rPrice):"null").replace(/\*rPromoPrice\*/g,a.rPromoPrice?changeFormatPrice(a.rPromoPrice):"null").replace(/,\*rPriceCent\*/g,a.rPriceCent?","+a.rPriceCent:"").replace(/,\*rPromoPriceCent\*/g,a.rPromoPriceCent?","+a.rPromoPriceCent:"").replace(/\*rPriceCent\*/g,a.rPriceCent||"null").replace(/\*rPromoPriceCent\*/g,a.rPromoPriceCent||"null").replace(/\*discountMsg\*/g,null==a.discountMsg?"":a.discountMsg.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")).replace(/\*retailerPricingText\*/g,a.retailerPricingText),i=$(o),e=i.find(".price-area");"DISCONTINUED"==a.modelStatusCode?(e.filter(".rPrice").html(""),e.filter(".rPromoPrice").remove(),e.filter(".retailer").remove()):"Y"==a.retailerPricingFlag?(e.filter(".rPrice").remove(),e.filter(".rPromoPrice").remove()):(a.rPromoPrice&&null!=a.rPromoPrice&&a.rPrice&&null!=a.rPrice?e.filter(".rPrice").remove():(a.rPrice&&null!=a.rPrice||e.filter(".rPrice").html(""),e.filter(".rPromoPrice").remove()),e.filter(".retailer").remove()),"Y"==a.vipPriceFlag&&(e.find(".product-price").remove(),e.append('<div class="product-price vip"><div class="vip-price"><span class="name">'+t.vipPriceMessage+"</span></div></div>")),"null"==i.find(".model-name a").text()&&i.find(".model-name a").empty(),o=i.get(0).outerHTML,r.$slideTarget.slick("slickAdd",o,0,!0),r.setBlank()},removeItem:function(e){var a=n.slick,t=$('.item[data-model-id="'+e+'"]').index(),r=$('.js-compare[data-model-id="'+e+'"]');a.$slideTarget.slick("slickRemove",t),a.setBlank(),1==r.length?r.removeClass("added").attr("aria-label",r.find(".add.sr-only").text()):r.each(function(e){r.eq(e).removeClass("added").attr("aria-label",r.eq(e).find(".add.sr-only").text())}),0==a.$slideTarget.find(".product").length&&a.switchLayer(!1)},switchLayer:function(e,a){var t=n.slick;e?(n.$el.addClass("active"),setTimeout(function(){t.$slideTarget.slick("setPosition"),n.$el.find(".compare-sticky-collspace .open").on("click",function(){n.$el.find(".compare-sticky-collspace .open").removeClass("active"),n.$el.find(".compare-sticky-collspace .close").addClass("active"),n.$el.removeClass("compare-min"),$("body").removeClass("compare-sticky-min"),n.$el.find(".compare-sticky-collspace button:visible").focus(),t.fixBtn()}),n.$el.find(".compare-sticky-collspace .close").on("click",function(){n.$el.find(".compare-sticky-collspace .open").addClass("active"),n.$el.find(".compare-sticky-collspace .close").removeClass("active"),n.$el.addClass("compare-min"),$("body").addClass("compare-sticky-min"),n.$el.find(".compare-sticky-collspace button:visible").focus(),t.fixBtn()}),n.$el.addClass("showing"),$("body").addClass("compare-sticky-showing"),t.fixBtn(),"number"==typeof a&&NaN!==a&&n.$el.find(".count").text(a)},50),"cn"!=COUNTRY_CODE.toLowerCase()||"undefined"==typeof _hmt||"pdp"!=lgCggroupName&&"super-category"!=lgCggroupName&&"category"!=lgCggroupName&&"sub-category"!=lgCggroupName||$(n.compareBtn).on("click",function(){var e=$(this).closest(".GPC0022").find(".count:eq(0)").text();console.log("[Baidu trackEvent] [add_to_compare_submit] ",", compare_quantity : "+e),_hmt.push(["_trackCustomEvent","add_to_compare_submit",{compare_quantity:e}])})):(n.$el.removeClass("showing"),console.log("dddd"),t.fixBtn(),$("body").removeClass("compare-sticky-showing"),n.$el.off("transitionend webkitTransitionEnd oTransitionEnd").on({"transitionend webkitTransitionEnd oTransitionEnd":function(){n.$el.hasClass("showing")||(n.$el.removeClass("active"),$("body").removeClass("compare-sticky-showing"),0==$(".GPC0022").hasClass("compare-min")&&$("body").removeClass("compare-sticky-min"))}}))},fixBtn:function(){var e=$(".GPC0022"),a=$(".intercom-lightweight-app, #intercom-container, .GPC0076, .epromotor-widget-area, ommi-widget, #callbell-iframe, .floating-whatsapp, #chat-widget-container"),t=$(".GPC0011");0<a.length&&(a.addClass("cp22"),e.hasClass("active")?e.hasClass("showing")&&!0!==e.hasClass("compare-min")?a.addClass("gang-hide"):!0!==e.hasClass("showing")&&!0!==e.hasClass("compare-min")||!0!==e.hasClass("showing")&&1==e.hasClass("compare-min")?(a.removeClass("gang-hide"),a.removeClass("cp22")):a.removeClass("gang-hide"):a.removeClass("cp22")),0<t.length?a.addClass("cp11"):a.removeClass("cp11")},ommiShadowUi:function(){var e,a;null!==document.querySelector("ommi-widget")&&(e=document.querySelector("ommi-widget").shadowRoot,(a=document.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("href","/lg5-common-gp/css/default.min.css"),e.appendChild(a),$("ommi-widget").addClass("ready"))}},trigger:{init:function(){$("body").off("click.jsCompare").on({"click.jsCompare":n.switcher},".js-compare");var e=getCookie(compareCookie.name);if(e){e=0<=e.indexOf("|")?e.split("|"):[e];for(var a=0;a<e.length;a++){var t=document.querySelectorAll('.js-compare[data-model-id="'+e[a]+'"]');$(t).addClass("added")}}$(".js-compare").each(function(){var e=($(this).is(".added")?$(this).find(".remove.sr-only"):$(this).find(".add.sr-only")).text();$(this).attr("aria-label",e)})}},cookie:null};n.init()});
//# sourceMappingURL=maps/GPC0022.min.js.map
